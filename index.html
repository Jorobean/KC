<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="KEMS (Kinetic Energy Management System) devices combine a reflective surface and camera so users can record and review device-based self-observation sessions for emotional awareness, grounding, and personal growth.">
  <meta name="keywords" content="KEMS, Kinetic Energy Management System, self-observation, device-based therapy, getkems.com, emotional awareness, grounding">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://getkems.com/">
  <title>KEMS — Kinetic Energy Management System</title>
  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="KEMS — Kinetic Energy Management System">
  <meta property="og:description" content="Device-based self-observation system that records sessions for reflection, coaching, and therapeutic growth.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://getkems.com/">
  <meta property="og:image" content="https://getkems.com/og-image.png">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@getkems">
  <meta name="twitter:creator" content="@GetKEMS">
  <meta name="twitter:title" content="KEMS — Kinetic Energy Management System">
  <meta name="twitter:description" content="Record and review device-based sessions to improve self-awareness, emotional regulation, and therapeutic outcomes.">
  <meta name="twitter:image" content="https://getkems.com/og-image.png">
  <style>
    :root{
      --bg: #f4f4f4;
      --card: #fff;
      --text: #222;
      --accent: #111;
      --max-width: 900px;
      --radius: 10px;
    }

    html { font-size: 16px; }
    @media (max-width: 420px){ html { font-size: 15px; } }
    @media (min-width: 1200px){ html { font-size: 18px; } }

    body {
      font-family: "Courier New", Courier, monospace;
      background-color: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container {
      width: 92%;
      max-width: var(--max-width);
      margin: clamp(20px, 6vw, 48px) auto;
      padding: clamp(10px, 2.5vw, 20px);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 6px 24px rgba(11,12,14,0.06);
      /* Remove flex-grow so the card sizes to content rather than stretching vertically */
      line-height: 1.5;
    }

    /* Fix: keep background visible on mobile */
    @media (max-width: 480px){
      .container {
        width: 88%;
        margin-left: auto;
        margin-right: auto;
      }
      body { padding-bottom: env(safe-area-inset-bottom); }
    }

    h1 {
      font-size: clamp(1.4rem, 2.2vw, 2rem);
      font-weight: 700;
      border-bottom: 2px solid var(--accent);
      padding-bottom: .4rem;
      margin: 0 0 0.75rem 0;
    }

    h2 { font-size: clamp(1.05rem, 1.6vw, 1.25rem); margin-top:1rem; }

    p { margin: .9rem 0; }

    ul { margin: .5rem 0 1rem 1.25rem; }

    a { color: #0b66ff; text-decoration: none; }
    a:active, a:focus, a:hover { text-decoration: underline; }

    .footer {
      text-align: center;
      /* Push footer to the bottom of the viewport when using body flex layout */
      margin-top: auto;
      margin-bottom: 34px;
      font-family: Inter, "Courier New", Courier, monospace;
      font-size: .95rem;
    }

    .footer .kem {
      font-weight: 900;
      font-size: 1.5rem;
    }

    /* Footer logo sizing: slightly larger and constrained */
    .footer .kem img {
      height: 48px;
      width: auto;
      transition: opacity 160ms ease;
      display: inline-block;
      vertical-align: middle;
    }

    .footer .corp {
      font-weight: 300;
      font-size: .95rem;
      margin-top: -4px;
    }

    .logo {
      text-align: center;
      margin-bottom: 8px;
    }

    .logo img {
      max-width: 150px;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    /* Theme variants */
    body.light {
      --bg: #f4f4f4;
      --card: #fff;
      --text: #222;
      --accent: #111;
    }

    body.dark {
      --bg: #0b0d10;
      --card: #0f1113;
      --text: #e6eef6;
      /* Use a subtle neutral accent in dark mode so the H1 divider isn't bright blue */
      --accent: rgba(255,255,255,0.09);
    }

    /* Top bar with logo and theme toggle */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: center; /* center content horizontally */
      gap: 12px;
      margin-bottom: 12px;
    }

    .theme-toggle {
      background: transparent;
      border: 1px solid rgba(0,0,0,0.08);
      padding: 8px 10px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 1rem;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .theme-toggle:focus { outline: 2px solid rgba(11,102,255,0.2); }
  </style>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "name": "KEMS",
        "url": "https://getkems.com/",
        "logo": "https://getkems.com/logo.png",
        "sameAs": ["https://www.instagram.com/GetKEMS","https://twitter.com/GetKEMS"]
      },
      {
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What is KEMS?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "KEMS (Kinetic Energy Management System) is a device-based self-observation system that records users as they speak and interact in front of the device to support personal growth, emotional awareness, and therapeutic reflection."
            }
          }
        ]
      }
    ]
  }
  </script>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="logo"></div>
    </div>
    <h1>KEMS — Kinetic Energy Management System</h1>
    <p><strong>KEMS</strong> (Kinetic Energy Management System) is a device-based self-observation system designed to support personal growth, emotional awareness, and therapeutic reflection.</p>
  </div>

    <div class="footer">
    <div class="kem"><img src="kems-logo2.png" alt="KEMS logo" id="footer-logo-toggle" tabindex="0" role="button" aria-label="Toggle theme"></div>
  </div>
  
  <script>
    (function(){
      const body = document.body;
      const btn = document.getElementById('theme-toggle');
      function setTheme(t){
        body.classList.remove('light','dark');
        body.classList.add(t);
        try{ localStorage.setItem('site-theme', t); }catch(e){}
        // Use text labels instead of emoji for accessibility and to avoid emoji references
        if(btn) btn.textContent = t === 'dark' ? 'Light' : 'Dark';

        // Update footer logo to variant per theme: light -> kems-logo2.png, dark -> kems-logo1.png
        try {
          const footerLogoEl = document.getElementById('footer-logo-toggle');
          if (footerLogoEl) {
            footerLogoEl.src = (t === 'dark') ? 'kems-logo1.png' : 'kems-logo2.png';
          }
        } catch (e) {
          // ignore missing element
        }
      }
      const saved = (function(){ try{return localStorage.getItem('site-theme')}catch(e){return null} })();
      if(saved === 'dark' || saved === 'light') setTheme(saved);
      else {
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        setTheme(prefersDark ? 'dark' : 'light');
      }
      if(btn){
        btn.addEventListener('click', function(){
          const current = body.classList.contains('dark') ? 'dark' : 'light';
          setTheme(current === 'dark' ? 'light' : 'dark');
        });
      }
      const logo = document.getElementById('logo-toggle');
      if(logo){
        logo.style.cursor = 'pointer';
        logo.addEventListener('click', function(){
          const current = body.classList.contains('dark') ? 'dark' : 'light';
          setTheme(current === 'dark' ? 'light' : 'dark');
        });
        logo.addEventListener('keydown', function(e){ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); const current = body.classList.contains('dark') ? 'dark' : 'light'; setTheme(current === 'dark' ? 'light' : 'dark'); } });
      }

      // Footer logo: click for theme toggle, long-press for authentication
      const footerLogo = document.getElementById('footer-logo-toggle');
      if (footerLogo) {
        footerLogo.style.cursor = 'pointer';
        let longPressTimer = null;
        const LONG_PRESS_DURATION = 1000; // 1 second
        
        // Mouse/touch start - begin long press detection
        function onPressStart() {
          longPressTimer = setTimeout(() => {
            triggerAuthentication();
          }, LONG_PRESS_DURATION);
        }
        
        // Mouse/touch end - cancel long press if released early
        function onPressEnd() {
          if (longPressTimer) {
            clearTimeout(longPressTimer);
            longPressTimer = null;
          }
        }
        
        // Regular click for theme toggle
        footerLogo.addEventListener('click', function () {
          if (longPressTimer) {
            clearTimeout(longPressTimer);
            longPressTimer = null;
          }
          const current = body.classList.contains('dark') ? 'dark' : 'light';
          setTheme(current === 'dark' ? 'light' : 'dark');
        });
        
        // Touch events for long press
        footerLogo.addEventListener('touchstart', onPressStart);
        footerLogo.addEventListener('touchend', onPressEnd);
        footerLogo.addEventListener('touchcancel', onPressEnd);
        
        // Mouse events for long press (on desktop)
        footerLogo.addEventListener('mousedown', onPressStart);
        footerLogo.addEventListener('mouseup', onPressEnd);
        footerLogo.addEventListener('mouseleave', onPressEnd);
        
        footerLogo.addEventListener('keydown', function (e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            const current = body.classList.contains('dark') ? 'dark' : 'light';
            setTheme(current === 'dark' ? 'light' : 'dark');
          }
        });
      }
    })();

    // Modal authentication function
    function showAuthModal(mirrorServerUrl) {
      // Create modal overlay
      const modal = document.createElement('div');
      modal.id = 'auth-modal';
      modal.innerHTML = `
        <div class="auth-modal-overlay">
          <div class="auth-modal-content">
            <div class="auth-modal-header">
              <h3>Mirror Access</h3>
              <button class="auth-modal-close">&times;</button>
            </div>
            <div class="auth-modal-body">
              <iframe id="auth-iframe" src="${mirrorServerUrl}/login?modal=true" frameborder="0"></iframe>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);

      // Add modal styles
      const style = document.createElement('style');
      style.textContent = `
        .auth-modal-overlay {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          top: 0;
          background: rgba(0,0,0,0.5);
          z-index: 10000;
          animation: slideUp 0.3s ease-out;
          display: flex;
          align-items: flex-end;
          justify-content: center;
        }
        .auth-modal-content {
          background: white;
          border-radius: 10px;
          max-height: 90vh;
          max-width: 500px;
          width: 100%;
          margin: 20px;
          overflow: hidden;
          box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
          display: flex;
          flex-direction: column;
        }
        @media (max-width: 600px) {
          .auth-modal-overlay {
            align-items: flex-end;
          }
          .auth-modal-content {
            margin: 0;
            border-radius: 10px 10px 0 0;
            max-height: 85vh;
          }
        }
        .auth-modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 15px 20px;
          border-bottom: 1px solid #eee;
          background: #f8f9fa;
        }
        .auth-modal-header h3 {
          margin: 0;
          color: #333;
          font-size: 18px;
        }
        .auth-modal-close {
          background: none;
          border: none;
          font-size: 24px;
          cursor: pointer;
          color: #666;
          padding: 0;
          width: 30px;
          height: 30px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .auth-modal-close:hover {
          color: #333;
        }
        .auth-modal-body {
          height: 60vh;
          overflow: hidden;
        }
        .auth-modal-body iframe {
          width: 100%;
          height: 100%;
          border: none;
        }
        @keyframes slideUp {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
      `;
      document.head.appendChild(style);

      // Handle modal close
      modal.querySelector('.auth-modal-close').onclick = function() {
        modal.remove();
        style.remove();
      };

      // Listen for messages from iframe
      window.addEventListener('message', function handleModalMessage(event) {
        if (event.data.type === 'auth_success') {
          // Replace iframe with Mirror app
          const iframe = modal.querySelector('#auth-iframe');
          iframe.src = mirrorServerUrl + '/';
          
          // Update header with close button
          const header = modal.querySelector('.auth-modal-header');
          header.innerHTML = `
            <h3>Mirror App</h3>
            <button class="auth-modal-close" title="Close">&times;</button>
          `;
          
          // Re-attach close handler
          header.querySelector('.auth-modal-close').onclick = function() {
            modal.remove();
            style.remove();
          };
          
          // Remove this event listener
          window.removeEventListener('message', handleModalMessage);
        } else if (event.data.type === 'close_modal') {
          modal.remove();
          style.remove();
          window.removeEventListener('message', handleModalMessage);
        }
      });
    }

    // Authentication trigger function
    async function triggerAuthentication() {
      // Get or prompt for mirror server URL
      let mirrorServerUrl = localStorage.getItem('mirrorServerUrl');
      
      if (!mirrorServerUrl) {
        mirrorServerUrl = prompt('Server address:', 'https://getkems.com');
        if (!mirrorServerUrl) return;
        
        // Basic validation - ensure it doesn't look like a password
        if (mirrorServerUrl === 'mirror2024' || mirrorServerUrl.length < 4) {
          alert('Please enter a valid server address, not the password.');
          return;
        }
      } else {
        // Ask if they want to use the saved URL or enter a new one
        const useSaved = confirm(`Use saved server: ${mirrorServerUrl}?\n\nClick OK to use this server, or Cancel to enter a new one.`);
        if (!useSaved) {
          localStorage.removeItem('mirrorServerUrl');
          mirrorServerUrl = prompt('Server address:', 'https://getkems.com');
          if (!mirrorServerUrl) return;
          
          // Basic validation
          if (mirrorServerUrl === 'mirror2024' || mirrorServerUrl.length < 4) {
            alert('Please enter a valid server address, not the password.');
            return;
          }
        }
      }
      
      // Ensure URL format is correct
      if (!mirrorServerUrl.startsWith('http')) {
        mirrorServerUrl = 'http://' + mirrorServerUrl;
      }
      
      // Check if this is an external/ngrok URL - redirect in same window instead of popup
      const urlObj = new URL(mirrorServerUrl);
      const isExternalAccess = urlObj.hostname !== 'getkems.com' && urlObj.hostname !== 'localhost' && !urlObj.hostname.startsWith('127.0.0.1');
      
      if (isExternalAccess) {
        // For external access (like ngrok), redirect to login in the same window
        window.location.href = mirrorServerUrl + '/login';
        return;
      }
      
      // For getkems.com access, show login in a bottom modal
      showAuthModal(mirrorServerUrl);
      
      if (!loginWindow) {
        alert('Please allow popups for this site and try again.');
        return;
      }
      
      // Listen for messages from the login window
      window.addEventListener('message', function handleAuthMessage(event) {
        // Only accept messages from our mirror server
        if (event.origin !== new URL(mirrorServerUrl).origin) {
          return;
        }
        
        if (event.data.type === 'auth_success') {
          // Store server URL for future use
          localStorage.setItem('mirrorServerUrl', mirrorServerUrl);
          
          // Close login window
          if (loginWindow && !loginWindow.closed) {
            loginWindow.close();
          }
          
          // Redirect to main app
          window.location.href = mirrorServerUrl;
          
          // Remove the event listener
          window.removeEventListener('message', handleAuthMessage);
        }
      });
    }
  </script>
</body>
</html>
